CREATE TABLE EMP (
  EMPCODE NUMBER(3) PRIMARY KEY,
  NAME VARCHAR2(10) NOT NULL,
  QUALIFICATION VARCHAR2(10) CHECK (QUALIFICATION IN ('BTECH', 'MTECH', 'MSC', 'MCA', 'PHD')),
  PHONE NUMBER(7) CHECK (PHONE BETWEEN 7000000 AND 9999999),
  EMAIL VARCHAR2(20) CHECK (EMAIL LIKE '%@digisol.com'),
  DESIGNATION VARCHAR2(20) CHECK (DESIGNATION IN ('DEVELOPER', 'PROJECT LEADER', 
                                                    'PROJECT MANAGER', 
                                                    'TECHNICAL HEAD', 
                                                    'PROJECT DIRECTOR', 
                                                    'CEO')),
  SALARY NUMBER(7,2) CHECK (SALARY BETWEEN 97000 AND 300000)
);

CREATE TABLE SKILL (
  SKILLID CHAR(3) PRIMARY KEY,
  SKILLNAME VARCHAR2(20) UNIQUE,
  CONSTRAINT UNIQUE_SKILL_NAME UNIQUE (SKILLNAME)
);

CREATE TABLE EMP_SKILL (
  EMPNO NUMBER(3) REFERENCES EMP(EMPCODE) PRIMARY KEY,
  SKILLID CHAR(3) REFERENCES SKILL(SKILLID) PRIMARY KEY,
  CONSTRAINT FK_EMP_SKILL_EMPNO FOREIGN KEY (EMPNO) REFERENCES EMP(EMPCODE),
  CONSTRAINT FK_EMP_SKILL_SKILLID FOREIGN KEY (SKILLID) REFERENCES SKILL(SKILLID)
);

CREATE TABLE WORK_EXP (
  EMPCODE NUMBER(3) REFERENCES EMP(EMPCODE),
  PRJID CHAR(3) REFERENCES PRJ_DETAILS(PRJID),
  WORK_EXPERIENCE NUMBER(3) CHECK (WORK_EXPERIENCE >= 0) NOT NULL,
  CLIENTID CHAR(3) REFERENCES CLIENT(CLIENTID) ON DELETE SET NULL,
  RATING CHAR(1) CHECK (RATING IN ('A', 'B', 'C')),
  CONSTRAINT PK_WORK_EXP PRIMARY KEY (EMPCODE, PRJID),  -- Composite primary key
  CONSTRAINT FK_WORK_EXP_EMP FOREIGN KEY (EMPCODE) REFERENCES EMP(EMPCODE),
  CONSTRAINT FK_WORK_EXP_PRJ FOREIGN KEY (PRJID) REFERENCES PRJ_DETAILS(PRJID)
);


CREATE TABLE CLIENT (
  CLIENTID CHAR(3) PRIMARY KEY CHECK (CLIENTID LIKE 'C%'),
  NAME VARCHAR2(10) NOT NULL,
  PHONE CHAR(14) CHECK (PHONE LIKE '+[9181314844]-%'),
  CONSTRAINT PK_CLIENTID PRIMARY KEY (CLIENTID)
);

CREATE TABLE PRJ_DETAILS (
  PRJID CHAR(3) PRIMARY KEY CHECK (PRJID LIKE 'P%'),
  PRJ_NAME VARCHAR2(10) NOT NULL,
  START_DATE DATE NOT NULL,
  END_DATE DATE CHECK (END_DATE >= START_DATE),
  ACTUAL_END_DATE DATE CHECK (ACTUAL_END_DATE >= END_DATE),
  LEAD_BY_EMPCODE NUMBER(3) REFERENCES EMP(EMPCODE),
  BUDGET_ALLOCATED NUMBER(10,1) NOT NULL,
  ACTUAL_BUDGET NUMBER(10,1),
  CLIENTID CHAR(3) REFERENCES CLIENT(CLIENTID) ON DELETE SET NULL,
  CONSTRAINT FK_PRJ_DETAILS_LEAD FOREIGN KEY (LEAD_BY_EMPCODE) REFERENCES EMP(EMPCODE)
);

CREATE TABLE FAMILY_DEPENDENTS (
  EMPNO NUMBER(3) REFERENCES EMP(EMPCODE) PRIMARY KEY,
  DEP_NAME VARCHAR2(20) PRIMARY KEY,
  RELATIONSHIP VARCHAR2(16) NOT NULL,
  AGE NUMBER(3) CHECK (AGE BETWEEN 1 AND 130)
);

CREATE TABLE MEDICAL_POLICY (
  EMPNO NUMBER(3) REFERENCES EMP(EMPCODE) PRIMARY KEY,
  POLICYNO VARCHAR2(6) PRIMARY KEY CHECK (POLICYNO LIKE 'MED%'),
  PREMIUM NUMBER(5) CHECK (PREMIUM > 0),
  POLICYDATE DATE NOT NULL
);

CREATE TABLE PAY_CHECK (
  EMPCODE NUMBER(3) REFERENCES EMP(EMPCODE) PRIMARY KEY,
  PAY_DATE DATE PRIMARY KEY,
  REGULAR_INCREMENT NUMBER(4) CHECK (REGULAR_INCREMENT IN (2000, 3000, 5000, 7000, 9000)),
  PERFORMANCE_INCENTIVE NUMBER(5),
  DA NUMBER(4),
  PF NUMBER(5),
  OTHER_INCENTIVES NUMBER(7),
